#==============================================================================
# Makefile to generate the YAT Test - NL - SOLEIL
#============================================================================== 

#==============================================================================
# INCLUDE DIRS
#==============================================================================
INCLUDE_DIRS = -I. -I../../include 

#==============================================================================
# LIB DIRS
#==============================================================================
LIB_DIRS  = -L../../target/nar/lib/i386-Linux-g++/static
LIB_DIRS += -L../../src/.libs

#==============================================================================
# COMP$(CC)ILER/LINKER OPTIONS for GNU/LINUX
#==============================================================================
CC=g++
#------------------------------------------------------------------------------
CFLAGS  = -pipe -O2 -W -g
#------------------------------------------------------------------------------
LD=gcc
#------------------------------------------------------------------------------
LDFLAGS =
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# LIBS
#------------------------------------------------------------------------------
LIBS = -lyat -lpthread -lstdc++ -ldl

#------------------------------------------------------------------------------
# OBJS FILES
#------------------------------------------------------------------------------
SRC = ./src/object.o ./src/producer.o ./src/consumer.o ./src/context.o ./src/main.o	
	 			 	 	 
#------------------------------------------------------------------------------
# RULE for .cpp files
#------------------------------------------------------------------------------
.SUFFIXES: .o .cpp
.cpp.o:
	$(CC) $(CFLAGS) $(INCLUDE_DIRS) -c -o $@ $<

#------------------------------------------------------------------------------
# RULE: all
#------------------------------------------------------------------------------
all: build

#------------------------------------------------------------------------------
# RULE: build
#------------------------------------------------------------------------------
build: $(SRC)
	$(LD) -o advancedtest $(LDFLAGS) $(SRC) $(LIB_DIRS) $(LIBS) 

#------------------------------------------------------------------------------
# RULE: clean
#------------------------------------------------------------------------------
clean:
	rm -f ./src/*.o
	rm -f ./src/*~
	rm -f ./advancedtest



	








